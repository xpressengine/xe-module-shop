<include target="_header.html"/>

<div id="confirm_order" class="mainContent" cond="isset($cart) && $cart->items">
    <h1>Confirm order</h1>

    <div cond="$XE_VALIDATOR_MESSAGE" class="message {$XE_VALIDATOR_MESSAGE_TYPE}">
        <p>{$XE_VALIDATOR_MESSAGE}</p>
    </div>

    Please review your order:

    Payment will be made when you click Submit.

    <fieldset>
        <legend>Billing info</legend>
        <p>{$billing_address}</p>
    </fieldset>

    <fieldset>
        <legend>Shipping method</legend>
        <p>{$shipping_method}</p>
    </fieldset>

    <fieldset>
        <legend>Shipping info</legend>
        <p>{$shipping_address}</p>
    </fieldset>

    <fieldset>
        <legend>Payment method</legend>
        <p>{$payment_method->getDisplayName()}</p>
    </fieldset>

    <fieldset>
        <legend>Products</legend>

        <table>
            <thead>
            <tr>
                <th></th>
                <th></th>
                <th>Ttile</th>
                <th>Quantity</th>
                <th>Price</th>
            </tr>
            </thead>
            <tbody>
            {@ $i = 0 }
            <!--@foreach($cart_products as $product)-->
            <tr>
                <td>{@ ++$i;}{$i}</td>
                <td><img src="{$product->getPrimaryImagePath()}" width="50px" height="50px" /></td>
                <td>{$product->title}</td>
                <td>{$product->quantity}</td>
                <td>{ShopDisplay::priceFormat($product->price, $shop->getCurrencySymbol())}</td>
            </tr>
            <!--@end-->
            <!--@if($cart->getShippingCost() !== 0)-->
            <tr style="font-weight: bold; background-color: #fafad2;">
                <td colspan="3">
                </td>
                <td>Shipping</td>
                <td>
                    {ShopDisplay::priceFormat($cart->getShippingCost(), $shop->getCurrencySymbol())}
                </td>
            </tr>
            <!--@end-->
            <tr style="font-weight: bold; background-color: #9acd32;">
                <td colspan="3">
                </td>
                <td>Total</td>
                <td>
                    {ShopDisplay::priceFormat($cart->getTotal(), $shop->getCurrencySymbol())}
                </td>
            </tr>
            </tbody>
        </table>
    </fieldset>

    <form action="{$payment_method->getPaymentFormAction()}" method="post">
        <input type="hidden" name="act" value="procShopPlaceOrder" />
        <input type="hidden" name="payment_method" value="{$payment_method_name}" />

        {$payment_method->getPaymentFormHTML()}

        <input type="submit" value="{$payment_method->getPaymentSubmitButtonText()}" />
    </form>

</div>

<include target="_footer.html"/>
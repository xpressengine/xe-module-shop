<!--
    Shop layout page
-->
<include target="_header.html" />
<include target="_sidebar.html" />
<include target="product_variants_datasource.html" />

<div class="body-left-panel" id="products">
    <div cond="$XE_VALIDATOR_MESSAGE" class="message {$XE_VALIDATOR_MESSAGE_TYPE}">
        <p>{$XE_VALIDATOR_MESSAGE}</p>
    </div>
    <h2 cond="$q && $act == 'dispShopSearch'">Searching for "{$q}"</h2>
    <h2 cond="!$products || empty($products)">No products</h2>
    <!--@foreach($products as $product)-->
    <div id="product_{$product->product_srl}" class="product {$product->product_type}">
        <img src="{$product->getPrimaryImagePath()}" width="150px" height="150px" />
        <span><a href="{getUrl('vid', $mid, 'act', 'dispShopProduct', 'product_srl', $product->product_srl, 'category_srl', $category_srl)}">{$product->product_srl} - {$product->title}</a></span>
        <span>Price: {$product->price}</span>

        <form action="./">
            <include target="product_variants" />

            <!--@if($product->isSimple())-->
            <input type="text" disabled="disabled" id="product_srl" name="product_srl" value="{$product->product_srl}" />
            <!--@end-->
            <a href="{getUrl('', 'act','procShopToolCartAddProduct', 'entry',   $product->product_type=='simple' ? $product->product_srl : 'REPLACE'  , 'quantity', 1)}" class="add_to_cart">Add to cart</a>
        </form>

    </div>
    <!--@end-->

    <div class="clear"></div>
    <!-- Pagination -->
    <!--@if($page_navigation)-->
    <div class="pagination" cond="$products && !empty($products)">
        <a href="{getUrl('page','','mid',$mid)}" class="prev"><span>{$lang->first_page}</span></a>

        <!--@while($page_no = $page_navigation->getNextPage())-->
        <!--@if($page == $page_no)-->
        <strong>{$page_no}</strong>
        <!--@else-->
        <a href="{getUrl('page',$page_no,'mid',$mid)}">{$page_no}</a>
        <!--@end-->
        <!--@end-->

        <a href="{getUrl('page',$page_navigation->last_page,'module_srl','')}" class="next"><span>{$lang->last_page}</span></a>
    </div>
    <!--@end-->
    <!-- /Pagination -->

</div>

<include target="_footer.html"/>